# Evaluation of Published Survival Prediction Models for Local Applications

This repository accompanies the paper "Evaluation of Published Survival Prediction Models for Local Applications" and provides the data and R code to repeat the reported results and figures.

### R Scripts

`model_evaluation_analysis.R`

Applys four published Cox survival models to local data by: 
 - Computing linear predictors and survival probabilies
 - Generating ROC curves with associated AUC values
 - Plotting calibration curves

`data_preprocessing.R`

Loads data files and handles required data manipulations to prepare for analysis. Included automatically when running primary model_evaluation_analysis.R script.

`appendix_calibration_sensitivity.R`

Generates calibration curves at 1,2,3,4 year timepoints to evaluate sensitivity of calibration to time selection. Loads appropriate WebPlotDigitizer data. Requires data generated by model_evaluation_analysis.R

### Data

`Helseth_CoxData.csv, Michaelsen_CoxData.csv, Gutman_CoxData.csv, Kumar_CoxData.csv`

Local data from UCLA are split into four files with relevant features for the four comparison published models.

`Gutman2013_SurvivalData.csv`

Subset of relevant features from shared data by [Gutman et.al. 2013](https://doi.org/10.1148/radiol.13120118). Used to determine Gutman model feature means and median survival time.

`KM_Survival/*_extracted_survival_5Xby5Y.csv`

Extracted survival values from published (Helseth, Michaelsen, Kumar) and re-estimated (Gutman) Kaplan Meier curves. Values extracted using [WebPlotDigitizer](https://automeris.io/WebPlotDigitizer/) (Desktop Version).

### R Packages Used
 - `rms` - https://cran.r-project.org/web/packages/rms/
 - `survivalROC` - https://cran.r-project.org/web/packages/survivalROC/
 - `pROC` - https://cran.r-project.org/web/packages/pROC/index.html
